<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>沐林&沐靈美學工作室 - 預約表單</title>

    <!-- 載入 Tailwind CDN 以使用其類別 (CSS 會被內嵌) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* 載入 Noto Serif TC (思源宋體)，提供優雅的明體/宋體感覺 */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&family=Inter:wght@400;600;700&display=swap');

        /* 設定主要字體為 Noto Serif TC (優雅的明體/宋體風格) */
        body {
            /* 柔和淺藍底色，符合您「金」與「水」的五行設計：純白 (F5F7FA) 到淺藍 (E0F7FA) */
            background: linear-gradient(to bottom, #F5F7FA, #E0F7FA); 
            background-attachment: fixed; 
            font-family: 'Noto Serif TC', 'Inter', sans-serif; 
            color: #333; /* 深灰文字，符合「水」的元素 */
        }
        
        .container-card {
            /* 圓角和陰影，提升質感 */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0f7fa; /* 淺藍邊框 */
        }
        
        /* 標題樣式優化 */
        .title {
            color: #1f2937; /* 深色文字，增加專業感 */
            letter-spacing: 0.05em; /* 字距微調 */
        }
        
        /* 輸入框樣式優化 */
        input[type="text"], textarea {
            border: 1px solid #b3e5fc; /* 淺藍色邊框 */
            transition: all 0.3s ease;
        }

        /* 輸入框聚焦時的樣式 */
        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #03a9f4; /* 亮藍色聚焦效果 */
            box-shadow: 0 0 0 3px rgba(3, 169, 244, 0.2);
        }

        /* 按鈕樣式 (深藍色/水元素) */
        .btn-primary {
            background-color: #0d47a1; /* 深藍色 */
            color: white;
            transition: background-color 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #1565c0; /* 滑鼠經過時變亮藍色 */
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">
    <!-- 外層容器：確保在手機上也能全寬顯示 -->
    <div class="container-card max-w-4xl mx-auto p-6 md:p-10 bg-white rounded-xl shadow-lg">

        <!-- 標題區塊 -->
        <header class="text-center mb-10">
            <h1 class="title text-3xl md:text-4xl font-bold mb-2">沐林&沐靈美學工作室</h1>
            <p class="text-xl md:text-2xl font-light text-gray-600">線上預約表單 (Appointment Form)</p>
        </header>

        <!-- 預約項目選擇區塊 -->
        <section class="mb-10 p-4 border border-blue-100 rounded-lg">
            <h2 class="text-xl md:text-2xl font-semibold mb-6 pb-2 border-b border-gray-200">請選擇預約項目</h2>
            
            <div id="mode-selector" class="flex flex-col sm:flex-row gap-4 justify-center">
                <!-- 熱蠟除毛按鈕 (深藍色，水元素) -->
                <button 
                    onclick="selectMode('depilation')" 
                    class="btn-primary w-full sm:w-1/2 py-3 rounded-lg text-lg font-medium shadow-md">
                    熱蠟除毛預約
                </button>
                
                <!-- 美容項目按鈕 (深藍色，水元素) -->
                <button 
                    onclick="selectMode('beauty')" 
                    class="btn-primary w-full sm:w-1/2 py-3 rounded-lg text-lg font-medium shadow-md">
                    美學項目預約
                </button>
            </div>
            
            <p id="mode-feedback" class="text-center mt-4 text-lg font-medium text-gray-700">請點擊上方按鈕選擇您的預約類型。</p>
        </section>

        <!-- 預約資訊表格區塊 (預設隱藏) -->
        <section id="appointment-form" class="mt-8 hidden p-4 border border-blue-200 rounded-lg bg-gray-50">
            <h2 class="title text-2xl font-semibold mb-6 pb-2 border-b border-gray-300">預約請填寫以下表格</h2>
            
            <form id="line-form" onsubmit="submitForm(event)">
                
                <!-- 姓名 -->
                <div class="input-group mb-4">
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">姓名 Name</label>
                    <input type="text" id="name" name="name" placeholder="請填寫您的姓名" required class="w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-400">
                </div>

                <!-- 電話 -->
                <div class="input-group mb-4">
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">電話 Phone</label>
                    <input type="text" id="phone" name="phone" placeholder="09XX-XXX-XXX" required class="w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-400">
                </div>

                <!-- 預約日期/時間 -->
                <div class="input-group mb-4">
                    <label for="date_time" class="block text-sm font-medium text-gray-700 mb-1">日期/時間 Date/Time (時段越多越好)</label>
                    <textarea id="date_time" name="date_time" rows="3" placeholder="e.g. 1/15 (五) 14:00 或 15:30；1/16 (六) 早上" required class="w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-400"></textarea>
                </div>
                
                <!-- 施作項目/部位 (根據模式切換內容) -->
                <div id="service-input" class="input-group mb-4">
                    <!-- JavaScript 會在這裡插入對應的欄位內容 -->
                </div>

                <!-- 是否為孕媽咪 (針對除毛/美容) -->
                <div id="pregnancy-check" class="input-group mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg hidden">
                    <div class="flex items-center">
                        <input type="checkbox" id="is_pregnant" name="is_pregnant" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                        <label for="is_pregnant" class="ml-2 block text-sm font-medium text-gray-800">
                            是否為孕媽咪？ (很重要，請如實告知)
                        </label>
                    </div>
                </div>

                <!-- 備註 -->
                <div class="input-group mb-6">
                    <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">備註 Notes</label>
                    <textarea id="notes" name="notes" rows="4" placeholder="e.g. 第一次除毛/其他皮膚狀況/疑問需求" class="w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-400"></textarea>
                </div>

                <!-- 提交按鈕 -->
                <button type="submit" id="submit-btn" class="btn-primary w-full py-3 rounded-lg text-xl font-semibold shadow-md hover:shadow-lg">
                    點此發送預約訊息至 Line
                </button>
            </form>
        </section>

        <!-- 訊息彈出視窗 (用於替代 alert()) -->
        <div id="message-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center hidden">
            <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full text-center">
                <h3 id="modal-title" class="text-xl font-bold mb-4 text-blue-600">訊息已發送</h3>
                <p id="modal-content" class="mb-6 text-gray-700">請前往 Line 官方帳號查看。</p>
                <button onclick="closeModal()" class="btn-primary py-2 px-4 rounded-lg font-medium">確定</button>
            </div>
        </div>

    </div>

    <script>
        let currentMode = '';

        // 設置不同模式下的輸入欄位內容
        const serviceContents = {
            depilation: `
                <label for="service_depilation" class="block text-sm font-medium text-gray-700 mb-1">熱蠟除毛 - 施作部位</label>
                <textarea id="service_depilation" name="service" rows="3" placeholder="e.g. 全腿、腋下、私密處 VIO (請註明有無做過)" required class="w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-400"></textarea>
            `,
            beauty: `
                <label for="service_beauty" class="block text-sm font-medium text-gray-700 mb-1">美學項目 - 施作項目/需求</label>
                <textarea id="service_beauty" name="service" rows="3" placeholder="e.g. 臉部撥筋、有氧活罐、靈氣療癒、客製手鍊、泌乳諮詢" required class="w-full p-3 rounded-lg focus:ring-2 focus:ring-blue-400"></textarea>
            `
        };

        const formSection = document.getElementById('appointment-form');
        const serviceInputDiv = document.getElementById('service-input');
        const modeFeedback = document.getElementById('mode-feedback');
        const pregnancyCheck = document.getElementById('pregnancy-check');

        // 選擇預約模式
        function selectMode(mode) {
            currentMode = mode;
            formSection.classList.remove('hidden');
            serviceInputDiv.innerHTML = serviceContents[mode];
            modeFeedback.textContent = (mode === 'depilation') 
                ? '您已選擇：熱蠟除毛預約。請填寫下方表格。'
                : '您已選擇：美學項目預約。請填寫下方表格。';
            
            // 只有除毛/美容項目顯示孕媽咪確認框
            if (mode === 'depilation' || mode === 'beauty') {
                pregnancyCheck.classList.remove('hidden');
            } else {
                pregnancyCheck.classList.add('hidden');
            }
        }

        // 提交表單
        function submitForm(event) {
            event.preventDefault(); 
            
            if (!currentMode) {
                alert('請先選擇預約項目！');
                return;
            }

            // 收集表單資料
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const dateTime = document.getElementById('date_time').value.trim();
            const service = document.querySelector('[name="service"]').value.trim();
            const notes = document.getElementById('notes').value.trim();
            const isPregnant = document.getElementById('is_pregnant').checked ? "是" : "否";
            
            // 建立訊息內容
            let message = `【沐林&沐靈 美學工作室 - 預約單】\n`;
            message += `---------------------------------\n`;
            message += `✅ 預約類型: ${(currentMode === 'depilation' ? '熱蠟除毛' : '美學項目')}\n`;
            message += `👤 姓名: ${name}\n`;
            message += `📞 電話: ${phone}\n`;
            message += `🗓️ 預約時段 (多選): ${dateTime}\n`;
            message += `🌟 施作項目/需求: ${service}\n`;

            if (currentMode === 'depilation' || currentMode === 'beauty') {
                 message += `🤰 孕媽咪: ${isPregnant}\n`;
            }
            
            if (notes) {
