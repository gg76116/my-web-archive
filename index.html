<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²æ—&æ²éˆç¾å­¸å·¥ä½œå®¤ - ç·šä¸Šé ç´„</title>
    
    <!-- æœ€çµ‚å„ªåŒ–ç‰ˆï¼šä¿®æ­£é¡è‰²è¼‰å…¥å•é¡Œï¼Œç¢ºä¿æŒ‰éˆ•ç‚ºè—è‰² -->
    
    <style>
        /* è¼‰å…¥å­—é«” */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&display=swap');

        /* é¡è‰²å®šç¾© (ç›´æ¥ä½¿ç”¨é¡è‰²ç¢¼ï¼Œé¿å…è®Šæ•¸è¼‰å…¥å¤±æ•—) */
        :root {
            --primary: #0d47a1; /* æ·±è—è‰² (ä¸»è‰²) */
            --secondary: #1565c0; /* ä¸­è—è‰² */
            --bg-light: #F5F7FA; /* æ·ºç™½/ç° */
            --bg-dark: #E0F7FA; /* æ·ºè— */
            --text-color: #333;
            --border-color: #b3e5fc;
            --success-color: #10b981; /* è¤‡è£½æˆåŠŸç¶ è‰² */
            --alert-color: #ef6c00; /* å­•åª½å’ªé»ƒè‰² */
        }

        body {
            background: linear-gradient(to bottom, var(--bg-light), var(--bg-dark)); 
            background-attachment: fixed; 
            font-family: 'Noto Serif TC', sans-serif; 
            color: var(--text-color); 
            padding: 1rem;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start; 
            min-height: 100vh;
        }
        
        /* ä¸»è¦å¡ç‰‡å®¹å™¨ (éŸ¿æ‡‰å¼è¨­è¨ˆ) */
        .card-container {
            width: 100%;
            max-width: 600px; 
            margin-top: 2rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: white; 
            border-radius: 12px; 
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); 
            border: 1px solid var(--border-color);
            box-sizing: border-box;
        }

        /* æ¨™é¡Œ */
        h1 {
            text-align: center;
            color: #0d47a1; /* ç›´æ¥ä½¿ç”¨æ·±è—è‰²ç¢¼ */ 
            font-size: 2.2rem; 
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        .subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: #4b5563;
            margin-bottom: 2rem;
        }

        /* å€å¡Šæ¨™é¡Œ */
        h2 {
            font-size: 1.35rem;
            font-weight: 600;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }

        /* æŒ‰éˆ•å®¹å™¨ */
        .button-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-direction: column;
        }
        @media (min-width: 480px) {
            .button-group {
                flex-direction: row; 
            }
        }
        
        /* ä¸»è¦æŒ‰éˆ•æ¨£å¼ - ä½¿ç”¨å›ºå®šé¡è‰²ç¢¼ */
        .btn {
            background-color: #0d47a1; /* æ·±è—è‰² */ 
            color: white;
            flex-grow: 1;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
            border: none;
            cursor: pointer;
            text-align: center;
        }
        .btn:hover {
            background-color: #1565c0; /* ä¸­è—è‰² */
        }
        /* è¤‡è£½æŒ‰éˆ•çš„ç¶ è‰² */
        .btn-copy {
            background-color: var(--success-color);
        }
        .btn-copy:hover {
            background-color: #059669; 
        }

        /* è¡¨å–®è¼¸å…¥æ¡† */
        .input-group {
            margin-bottom: 1rem;
        }
        .input-group label {
            display: block;
            font-size: 0.9rem;
            color: #4b5563;
            margin-bottom: 0.25rem;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 0.75rem;
            border-radius: 6px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        input[type="text"]:focus, textarea:focus {
            border-color: #0d47a1; /* æ·±è—è‰² */
            outline: none;
        }

        /* å‚™è¨»å€å¡Š */
        .form-section {
            background-color: #f9fafb;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-top: 1.5rem;
        }
        
        /* å­•åª½å’ªæé†’å€å¡Š */
        #pregnancy-check {
            background-color: #fffde7;
            padding: 0.75rem;
            border-radius: 6px;
            border: 1px dashed #fdd835;
        }
        #pregnancy-check label {
            color: var(--alert-color);
            font-weight: 600;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* å½ˆçª—æ¨£å¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 1.5rem;
            border-radius: 12px;
            max-width: 90%;
            width: 350px;
            text-align: center;
        }
        
        #message-text-area {
            resize: none;
            height: 120px;
            font-size: 0.85rem;
            font-family: monospace; 
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    
    <div class="card-container">

        <h1>æ²æ—&æ²éˆç¾å­¸å·¥ä½œå®¤</h1>
        <p class="subtitle">ç·šä¸Šé ç´„è¡¨å–® (Appointment Form)</p>

        <!-- é ç´„é …ç›®é¸æ“‡å€å¡Š -->
        <section style="margin-bottom: 2rem;">
            <h2>è«‹é¸æ“‡é ç´„é …ç›®</h2>
            
            <div id="mode-selector" class="button-group">
                <button onclick="selectMode('depilation')" class="btn">ç†±è Ÿé™¤æ¯›é ç´„</button>
                <button onclick="selectMode('beauty')" class="btn">ç¾å­¸é …ç›®é ç´„</button>
            </div>
            
            <p id="mode-feedback" style="text-align: center; font-size: 0.95rem; color: #6b7280;">è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•é¸æ“‡æ‚¨çš„é ç´„é¡å‹ã€‚</p>
        </section>

        <!-- é ç´„è³‡è¨Šè¡¨æ ¼å€å¡Š (é è¨­éš±è—) -->
        <section id="appointment-form" class="form-section hidden">
            <h2 style="border: none; margin-bottom: 1rem; color: #0d47a1; font-size: 1.5rem;">é ç´„è«‹å¡«å¯«ä»¥ä¸‹è¡¨æ ¼</h2>
            
            <form id="line-form" onsubmit="submitForm(event)">
                
                <!-- å§“å -->
                <div class="input-group">
                    <label for="name">ğŸ‘¤ å§“å Name</label>
                    <input type="text" id="name" name="name" placeholder="è«‹å¡«å¯«æ‚¨çš„å§“å" required>
                </div>

                <!-- é›»è©± -->
                <div class="input-group">
                    <label for="phone">ğŸ“ é›»è©± Phone</label>
                    <input type="text" id="phone" name="phone" placeholder="09XX-XXX-XXX" required>
                </div>

                <!-- é ç´„æ—¥æœŸ/æ™‚é–“ -->
                <div class="input-group">
                    <label for="date_time">ğŸ—“ï¸ é ç´„æ—¥æœŸ/æ™‚é–“ (æ™‚æ®µè¶Šå¤šè¶Šå¥½)</label>
                    <textarea id="date_time" name="date_time" rows="3" placeholder="e.g. 1/15 (äº”) 14:00 æˆ– 15:30ï¼›1/16 (å…­) æ—©ä¸Š" required></textarea>
                </div>
                
                <!-- æ–½ä½œé …ç›®/éƒ¨ä½ (åˆ‡æ›å…§å®¹) -->
                <div id="service-input" class="input-group">
                    <!-- JS æ’å…¥å…§å®¹ -->
                </div>

                <!-- æ˜¯å¦ç‚ºå­•åª½å’ª (ç‰¹æ®Šæé†’) -->
                <div id="pregnancy-check" class="input-group hidden">
                    <input type="checkbox" id="is_pregnant" name="is_pregnant" style="margin-right: 0.5rem;">
                    <label for="is_pregnant" style="display: inline; font-size: 0.9rem;">
                        æ˜¯å¦ç‚ºå­•åª½å’ªï¼Ÿ (å¾ˆé‡è¦ï¼Œè«‹å¦‚å¯¦å‘ŠçŸ¥)
                    </label>
                </div>

                <!-- å‚™è¨» -->
                <div class="input-group" style="margin-top: 1.5rem;">
                    <label for="notes">ğŸ“ å‚™è¨» Notes</label>
                    <textarea id="notes" name="notes" rows="3" placeholder="e.g. ç¬¬ä¸€æ¬¡é™¤æ¯›/å…¶ä»–çš®è†šç‹€æ³/ç–‘å•éœ€æ±‚" ></textarea>
                </div>

                <!-- æäº¤æŒ‰éˆ• -->
                <button type="submit" id="submit-btn" class="btn" style="width: 100%; margin-top: 1.5rem; font-size: 1.25rem;">
                    é»æ­¤ç™¼é€é ç´„è¨Šæ¯è‡³ Line
                </button>
            </form>
        </section>

        <!-- è¨Šæ¯å½ˆå‡ºè¦–çª— -->
        <div id="message-modal" class="modal hidden" onclick="closeModal(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <h3 id="modal-title" style="font-size: 1.15rem; color: #0d47a1; margin-bottom: 0.5rem;">è¨Šæ¯å·²ç”Ÿæˆ</h3>
                <p id="modal-content-text" style="font-size: 0.9rem; color: #4b5563; margin-bottom: 1rem;">
                    è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•<strong style="color: #0d47a1;">ä¸€éµè¤‡è£½</strong>ï¼Œä¸¦æ‰‹å‹•è²¼ä¸Šç™¼é€è‡³ Line å®˜æ–¹å¸³è™Ÿã€‚
                </p>
                
                <textarea id="message-text-area" rows="8" readonly></textarea>
                
                <!-- è¤‡è£½æŒ‰éˆ• -->
                <button onclick="copyMessage()" class="btn btn-copy" style="width: 100%; margin-bottom: 0.5rem; font-weight: 600;">
                    âœ… è¤‡è£½é ç´„è¨Šæ¯ (é»æ“Šæˆ‘)
                </button>
                
                <!-- é—œé–‰æŒ‰éˆ• -->
                <button onclick="closeModal()" class="btn" style="width: 100%; background-color: #6b7280; font-size: 1rem;">
                    å®Œæˆ (é»æ“Šæˆ‘)
                </button>
                
                <!-- è¤‡è£½æˆåŠŸçš„æç¤ºè¨Šæ¯ -->
                <p id="copy-feedback" style="color: var(--success-color); font-weight: 600; margin-top: 0.5rem; display: none; font-size: 0.9rem;">è¤‡è£½æˆåŠŸï¼</p>
            </div>
        </div>

    </div>

    <script>
        let currentMode = '';

        // è¨­ç½®ä¸åŒæ¨¡å¼ä¸‹çš„è¼¸å…¥æ¬„ä½å…§å®¹
        const serviceContents = {
            depilation: `
                <label for="service_depilation">âœ¨ ç†±è Ÿé™¤æ¯› - æ–½ä½œéƒ¨ä½</label>
                <textarea id="service_depilation" name="service" rows="3" placeholder="e.g. å…¨è…¿ã€è…‹ä¸‹ã€ç§å¯†è™• VIO (è«‹è¨»æ˜æœ‰ç„¡åšé)" required></textarea>
            `,
            beauty: `
                <label for="service_beauty">âœ¨ ç¾å­¸é …ç›® - æ–½ä½œé …ç›®/éœ€æ±‚</label>
                <textarea id="service_beauty" name="service" rows="3" placeholder="e.g. è‡‰éƒ¨æ’¥ç­‹ã€æœ‰æ°§æ´»ç½ã€éˆæ°£ç™‚ç™’ã€å®¢è£½æ‰‹éŠã€æ³Œä¹³è«®è©¢" required></textarea>
            `
        };

        const formSection = document.getElementById('appointment-form');
        const serviceInputDiv = document.getElementById('service-input');
        const modeFeedback = document.getElementById('mode-feedback');
        const pregnancyCheck = document.getElementById('pregnancy-check');

        // é¸æ“‡é ç´„æ¨¡å¼
        function selectMode(mode) {
            currentMode = mode;
            formSection.classList.remove('hidden');
            serviceInputDiv.innerHTML = serviceContents[mode];
            modeFeedback.textContent = (mode === 'depilation') 
                ? 'æ‚¨å·²é¸æ“‡ï¼šç†±è Ÿé™¤æ¯›é ç´„ã€‚è«‹å¡«å¯«ä¸‹æ–¹è¡¨æ ¼ã€‚'
                : 'æ‚¨å·²é¸æ“‡ï¼šç¾å­¸é …ç›®é ç´„ã€‚è«‹å¡«å¯«ä¸‹æ–¹è¡¨æ ¼ã€‚';
            
            // åªæœ‰é™¤æ¯›/ç¾å®¹é …ç›®é¡¯ç¤ºå­•åª½å’ªç¢ºèªæ¡†
            if (mode === 'depilation' || mode === 'beauty') {
                pregnancyCheck.classList.remove('hidden');
            } else {
                pregnancyCheck.classList.add('hidden');
            }
        }

        // æäº¤è¡¨å–® - ç”¢ç”Ÿè¨Šæ¯ä¸¦é¡¯ç¤ºå½ˆçª—
        function submitForm(event) {
            event.preventDefault(); 
            
            if (!currentMode) { return; }

            // æ”¶é›†è¡¨å–®è³‡æ–™
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const dateTime = document.getElementById('date_time').value.trim();
            const serviceInput = document.querySelector('[name="service"]');
            const service = serviceInput ? serviceInput.value.trim() : '';
            const notes = document.getElementById('notes').value.trim();
            const isPregnant = document.getElementById('is_pregnant').checked ? "æ˜¯" : "å¦";
            
            // å»ºç«‹è¨Šæ¯å…§å®¹
            let message = `ã€æ²æ—&æ²éˆ ç¾å­¸å·¥ä½œå®¤ - ç·šä¸Šé ç´„å–®ã€‘\n`;
            message += `----------------------------------\n`;
            message += `âœ… é ç´„é¡å‹: ${(currentMode === 'depilation' ? 'ç†±è Ÿé™¤æ¯›' : 'ç¾å­¸é …ç›®')}\n`;
            message += `ğŸ‘¤ å§“å: ${name}\n`;
            message += `ğŸ“ é›»è©±: ${phone}\n`;
            message += `ğŸ—“ï¸ é ç´„æ™‚æ®µ: ${dateTime}\n`;
            message += `ğŸŒŸ æ–½ä½œé …ç›®/éœ€æ±‚: ${service}\n`;

            if (currentMode === 'depilation' || currentMode === 'beauty') {
                 message += `ğŸ¤° å­•åª½å’ª: ${isPregnant}\n`;
            }
            
            if (notes) {
                message += `ğŸ“ å‚™è¨»: ${notes}\n`;
            } else {
                message += `ğŸ“ å‚™è¨»: (ç„¡)\n`;
            }
            message += `----------------------------------\n`;
            message += `è«‹å°‡æ­¤è¨Šæ¯ç™¼é€çµ¦å·¥ä½œå®¤ Line å®˜æ–¹å¸³è™Ÿã€‚`;
            
            // è¨­ç½®åˆ° textarea ä¸¦é¡¯ç¤ºå½ˆçª—
            document.getElementById('message-text-area').value = message;
            document.getElementById('copy-feedback').style.display = 'none'; 
            showModal();
        }

        // è¤‡è£½è¨Šæ¯åˆ°å‰ªè²¼ç°¿ (å„ªå…ˆä½¿ç”¨ç¾ä»£ API)
        function copyMessage() {
            const message = document.getElementById('message-text-area').value;
            const feedback = document.getElementById('copy-feedback');
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                // ç¾ä»£ç€è¦½å™¨/æ‰‹æ©Ÿæ”¯æ´
                navigator.clipboard.writeText(message).then(() => {
                    feedback.textContent = 'âœ… è¤‡è£½æˆåŠŸï¼è«‹è‡³ Line è²¼ä¸Šã€‚';
                    feedback.style.display = 'block';
                }).catch(err => {
                    // å¤±æ•—é€€å›å‚³çµ±æ–¹æ³•
                    fallbackCopyMessage();
                });
            } else {
                // å‚³çµ±æ–¹æ³•
                fallbackCopyMessage();
            }
        }

        // å‚³çµ±è¤‡è£½æ–¹æ³• (ç”¨æ–¼ç›¸å®¹æ€§)
        function fallbackCopyMessage() {
            const textArea = document.getElementById('message-text-area');
            const feedback = document.getElementById('copy-feedback');
            textArea.select();
            
            try {
                document.execCommand('copy');
                feedback.textContent = 'âœ… è¤‡è£½æˆåŠŸï¼è«‹è‡³ Line è²¼ä¸Šã€‚';
                feedback.style.display = 'block';
            } catch (err) {
                feedback.textContent = 'âŒ è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–è¨Šæ¯å…§å®¹ã€‚';
                feedback.style.display = 'block';
            }
        }

        // é¡¯ç¤ºå½ˆå‡ºè¦–çª—
        function showModal() {
            document.getElementById('message-modal').classList.remove('hidden');
        }

        // é—œé–‰å½ˆå‡ºè¦–çª—
        function closeModal() {
            document.getElementById('message-modal').classList.add('hidden');
        }

    </script>
</body>
</html>
